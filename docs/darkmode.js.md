<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [bootstrap-dark-5][1]
-   [inDarkMode][2]
    -   [Examples][3]
-   [hasGDPRConsent][4]
    -   [Examples][5]
-   [cookieExpiry][6]
-   [dataSelector][7]
    -   [Examples][8]
-   [documentRoot][9]
-   [saveValue][10]
    -   [Parameters][11]
-   [readValue][12]
    -   [Parameters][13]
-   [eraseValue][14]
    -   [Parameters][15]
-   [getSavedColorScheme][16]
-   [getPreferedColorScheme][17]
-   [setDarkMode][18]
    -   [Parameters][19]
    -   [Examples][20]
-   [toggleDarkMode][21]
    -   [Parameters][22]
-   [resetDarkMode][23]
-   [DATA_KEY][24]
-   [VALUE_LIGHT][25]
-   [VALUE_DARK][26]
-   [CLASS_NAME_LIGHT][27]
-   [CLASS_NAME_DARK][28]
-   [saveCookie][29]
    -   [Parameters][30]
-   [readCookie][31]
    -   [Parameters][32]
-   [getColorScheme][33]
-   [updatePreferedColorSchemeEvent][34]
-   [onDOMContentLoaded][35]
-   [darkmode][36]

## bootstrap-dark-5

_boostrap-dark-5_ `darkmode.js` -- the JavaScript module.

Use this JS file, and its `darkmode` object, in your HTML to automatically capture `prefers-color-scheme` media query
events and also initialize the document root (`<HTML>` tag) with the user prefered color scheme.

The `darkmode` object can also be used to drive a dark mode toggle event, with optional persistance
storage in either a cookie (if GDPR consent is given) or the browsers `localStorage` object.

**Meta**

-   **author**: Vino Rodrigues

## inDarkMode

**_property_**

Used to get the current state, `true` when in dark mode, `false` when in light mode or when mode not set

Can also be used to set the current mode _(with no persistance saving)_

Type: [boolean][37]

### Examples

Get if page is in "Dark" mode


```javascript
var myVal = darkmode.inDarkMode;
```

Set the page to the "Dark" mode


```javascript
darkmode.inDarkMode = true;
```

## hasGDPRConsent

Variable to store GDPR Consent

Used in [#saveValue][10] to determin if a cookie or the `localStorage` object should be used.

-   Set to `true` when GDPR Consent has been given to enable storage to cookie _(useful in Server-Side knowlage of user preference)_
-   The setter takes care of swapping the cookie and localStorage if appropriate
-   Default is `false`, thus storage will use the browsers localStorage object _(Note: No expiry is set)_

### Examples

Set once GDPR consent is given by the user


```javascript
darkmode.hasGDPRConsent = true;
```

## cookieExpiry

Expiry time in days when saving and GDPR consent is give

## dataSelector

When set will use the given data selector instead of a class in the `<html>`tag

Type: [string][38]

### Examples

Setting the dataSelector


```javascript
// use the full name attribute, starting with "data-"
darkmode.dataSelector = "data-bs-theme";
```

Returns **[string][38]** 

## documentRoot

Saves the instance of the documentRoot (i.e. `<html>` tag) when the object is created.

Type: [HTMLHtmlElement][39]

Returns **[HTMLHtmlElement][39]** 

## saveValue

Save the current color-scheme mode

### Parameters

-   `name` **[string][38]** \-- Name of the cookie or localStorage->name, is dependant on [#hasGDPRConsent][4]
-   `value` **[string][38]** \-- Should be one of `light` or `dark`
-   `days` **[number][40]** \-- Number of days to expire the cookie when the cookie is used, ignored for `localStorage` (optional, default `this.cookieExpiry`)

Returns **void** 

## readValue

Retrieves the color-scheme last saved

**NOTE:** is dependant on [#hasGDPRConsent][4]

### Parameters

-   `name` **[string][38]** \-- Name of the cookie or localStorage->name

Returns **[string][38]** \-- The saved value, iether `light` or `dark`, or an empty string if not saved prior

## eraseValue

Deletes the saved color-scheme

**NOTE:** is dependant on [#hasGDPRConsent][4]

### Parameters

-   `name` **[string][38]** 

Returns **void** \-- Nothing, erasure is assumed

## getSavedColorScheme

Queries the `<HTML>` tag for the current color-scheme

_(This value is set prior via the [#setDarkMode][18]) function.)_

Returns **[string][38]** \-- The current value, iether `light` or `dark`, or an empty string if not saved prior

## getPreferedColorScheme

Queries the `prefers-color-scheme` media query for the current color-scheme

_(This value is set prior via the [#setDarkMode][18]) function.)_

Returns **[string][38]** \-- The current value, iether `light` or `dark`, or an empty string if the media query is not supported

## setDarkMode

Sets the color-scheme in the `<HTML>` tag as a class called either `light` or `dark`

### Parameters

-   `darkMode` **[boolean][37]** \-- `true` for "dark", `false` for 'light'
-   `doSave` **[boolean][37]** \-- If `true`, then will also call [#saveValue][10] to save that state (optional, default `true`)

### Examples

Dark mode when the class name is set


```javascript
<html lang="en" class="dark">
<!-- Note: the "light" class is removed -->
```

Light mode when the class name is set


```javascript
<html lang="en" class="light">
<!-- Note: the "dark" class is removed -->
```

Dark mode when `dataSelector = "data-bs-theme"` is set


```javascript
<html lang="en" data-bs-theme="dark">
```

Light mode when `dataSelector = "data-bs-theme"` is set


```javascript
<html lang="en" data-bs-theme="light">
```

Returns **void** \-- Nothing, assumes saved

## toggleDarkMode

Toggles the color-scheme in the `<HTML>` tag as a class called either `light` or `dark`
based on the inverse of it's prior state.

_(See [#setDarkMode][18])_

### Parameters

-   `doSave`   (optional, default `true`)

Returns **void** Nothing, assumes success

## resetDarkMode

Calls [#eraseValue][14] to erase any saved value, and then
calls [#getPreferedColorScheme][17] to retrieve the `prefers-color-scheme` media query,
passing its value to [#setDarkMode][18] to reset the users preference.

Returns **void** Nothing, no error handling is performed.

## DATA_KEY

**_const_** -- Name of the cookie or localStorage->name when saving

## VALUE_LIGHT

**_const_** -- String used to identify light mode _(do not change)_, @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][41]

## VALUE_DARK

**_const_** -- String used to identify dark mode _(do not change)_, @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][41]

## CLASS_NAME_LIGHT

**_const_** -- String used to identify light mode as a class in the `<HTML>` tag

## CLASS_NAME_DARK

**_const_** -- String used to identify dark mode as a class in the `<HTML>` tag

## saveCookie

writes a cookie

### Parameters

-   `name` **[string][38]** \-- Name of the cookie
-   `value`  \-- Value to be saved (optional, default `""`)
-   `days`  \-- Number of days to expire the cookie (optional, default `365`)

Returns **void** 

## readCookie

reads a cookie

### Parameters

-   `name` **[string][38]** 

Returns **[string][38]** 

## getColorScheme

Gets the current color-scheme from the document `<HTML>` tag

Returns **[string][38]** \-- The current value, iether `light` or `dark`, or an empty string if not present

## updatePreferedColorSchemeEvent

**_static_** -- function called by the media query on change event.

First retrieves any saved value, and if present ignores the event, but
if not set then triggers the [#setDarkMode][18] function to chnage the current mode.

Returns **void** \-- Nothing, assumes success

## onDOMContentLoaded

**_static_** -- function called when the DOM finishes loading.

Does all the DarkMode initialization, including:

-   Loading any prior stored preference (GDPR consent is **_not_** assumed)
-   else, honoring any `<HTML>` tag `class="dark|light"` that Server-Side may set
-   else, honoring the browser / OS `prefers-color-scheme` preference
    and setting the derived mode by calling [#setDarkMode][18]

Followd by setting up the media query on change event

Returns **void** 

## darkmode

**_const_** -- This is the global instance (object) of the DarkMode class.

[1]: #bootstrap-dark-5

[2]: #indarkmode

[3]: #examples

[4]: #hasgdprconsent

[5]: #examples-1

[6]: #cookieexpiry

[7]: #dataselector

[8]: #examples-2

[9]: #documentroot

[10]: #savevalue

[11]: #parameters

[12]: #readvalue

[13]: #parameters-1

[14]: #erasevalue

[15]: #parameters-2

[16]: #getsavedcolorscheme

[17]: #getpreferedcolorscheme

[18]: #setdarkmode

[19]: #parameters-3

[20]: #examples-3

[21]: #toggledarkmode

[22]: #parameters-4

[23]: #resetdarkmode

[24]: #data_key

[25]: #value_light

[26]: #value_dark

[27]: #class_name_light

[28]: #class_name_dark

[29]: #savecookie

[30]: #parameters-5

[31]: #readcookie

[32]: #parameters-6

[33]: #getcolorscheme

[34]: #updatepreferedcolorschemeevent

[35]: #ondomcontentloaded

[36]: #darkmode

[37]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[38]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[39]: https://developer.mozilla.org/docs/Web/API/HTMLHtmlElement

[40]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[41]: https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme
