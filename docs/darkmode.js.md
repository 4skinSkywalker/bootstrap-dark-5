<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [bootstrap-dark-5][1]
-   [inDarkMode][2]
-   [hasGDPRConsent][3]
-   [cookieExpiry][4]
-   [documentRoot][5]
-   [saveValue][6]
    -   [Parameters][7]
-   [readValue][8]
    -   [Parameters][9]
-   [eraseValue][10]
    -   [Parameters][11]
-   [getSavedColorScheme][12]
-   [getPreferedColorScheme][13]
-   [setDarkMode][14]
    -   [Parameters][15]
    -   [Examples][16]
-   [toggleDarkMode][17]
    -   [Parameters][18]
-   [resetDarkMode][19]
-   [DATA_KEY][20]
-   [VALUE_LIGHT][21]
-   [VALUE_DARK][22]
-   [CLASS_NAME_LIGHT][23]
-   [CLASS_NAME_DARK][24]
-   [saveCookie][25]
    -   [Parameters][26]
-   [readCookie][27]
    -   [Parameters][28]
-   [getColorScheme][29]
-   [updatePreferedColorSchemeEvent][30]
-   [onDOMContentLoaded][31]
-   [darkmode][32]

## bootstrap-dark-5

_boostrap-dark-5_ `darkmode.js` -- the JavaScript module.

Use this JS file, and its `darkmode` object, in your HTML to automatically capture `prefers-color-scheme` media query
events and also initialize the document root (`<HTML>` tag) with the user prefered color scheme.

The `darkmode` object can also be used to drive a dark mode toggle event, with optional persistance
storage in either a cookie (if GDPR consent is given) or the browsers `localStorage` object.

**Meta**

-   **author**: Vino Rodrigues

## inDarkMode

**_property_**

Used to get the current state, `true` when in dark mode, `false` when in light mode or when mode not set

Can also be used to set the current mode _(with no persistance saving)_

Type: [boolean][33]

## hasGDPRConsent

Variable to store GDPR Consent

Used in [#saveValue][6] to determin if a cookie or the `localStorage` object should be used.

-   Set to `true` when GDPR Consent has been given to enable storage to cookie _(useful in Server-Side knowlage of user preference)_
-   The setter takes care of swapping the cookie and localStorage if appropriate
-   Default is `false`, thus storage will use the browsers localStorage object _(Note: No expiry is set)_

## cookieExpiry

Expiry time in days when saving and GDPR consent is give

## documentRoot

Saves the instance of the documentRoot (i.e. `<html>` tag) when the object is created.

Type: [HTMLHtmlElement][34]

Returns **[HTMLHtmlElement][34]** 

## saveValue

Save the current color-scheme mode

### Parameters

-   `name` **[string][35]** \-- Name of the cookie or localStorage->name, is dependant on [#hasGDPRConsent][3]
-   `value` **[string][35]** \-- Should be one of `light` or `dark`
-   `days` **[number][36]** \-- Number of days to expire the cookie when the cookie is used, ignored for `localStorage` (optional, default `this.cookieExpiry`)

Returns **void** 

## readValue

Retrieves the color-scheme last saved

NOTE: is dependant on [#hasGDPRConsent][3]

### Parameters

-   `name` **[string][35]** \-- Name of the cookie or localStorage->name

Returns **[string][35]** \-- The saved value, iether `light` or `dark`, or an empty string if not saved prior

## eraseValue

Deletes the saved color-scheme

NOTE: is dependant on [#hasGDPRConsent][3]

### Parameters

-   `name` **[string][35]** 

Returns **void** \-- Nothing, erasure is assumed

## getSavedColorScheme

Queries the `<HTML>` tag for the current color-scheme

(This value is set prior via the [#setDarkMode][14]) function.)

Returns **[string][35]** \-- The current value, iether `light` or `dark`, or an empty string if not saved prior

## getPreferedColorScheme

Queries the `prefers-color-scheme` media query for the current color-scheme

(This value is set prior via the [#setDarkMode][14]) function.)

Returns **[string][35]** \-- The current value, iether `light` or `dark`, or an empty string if the media query is not supported

## setDarkMode

Sets the color-scheme in the `<HTML>` tag as a class called either `light` or `dark`

### Parameters

-   `darkMode` **[boolean][33]** \-- `true` for "dark", `false` for 'light'
-   `doSave` **[boolean][33]** \-- If `true`, then will also call [#saveValue][6] to save that state (optional, default `true`)

### Examples

```javascript
`<html lang="en" class="dark">`
```

```javascript
`<html lang="en" class="light">`
```

Returns **void** \-- Nothing, assumes saved

## toggleDarkMode

Toggles the color-scheme in the `<HTML>` tag as a class called either `light` or `dark`
based on the inverse of it's prior state.

See [#setDarkMode][14]

### Parameters

-   `doSave`   (optional, default `true`)

Returns **void** Nothing, assumes success

## resetDarkMode

Calls [#eraseValue][10] to erase any saved value, and then
calls [#getPreferedColorScheme][13] to retrieve the `prefers-color-scheme` media query,
passing its value to [#setDarkMode][14] to reset the users preference.

Returns **void** Nothing, no error handling is performed.

## DATA_KEY

**_const_** -- Name of the cookie or localStorage->name when saving

## VALUE_LIGHT

**_const_** -- String used to identify light mode _(do not change)_, @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][37]

## VALUE_DARK

**_const_** -- String used to identify dark mode _(do not change)_, @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][37]

## CLASS_NAME_LIGHT

**_const_** -- String used to identify light mode as a class in the `<HTML>` tag

## CLASS_NAME_DARK

**_const_** -- String used to identify dark mode as a class in the `<HTML>` tag

## saveCookie

writes a cookie

### Parameters

-   `name` **[string][35]** \-- Name of the cookie
-   `value`  \-- Value to be saved (optional, default `""`)
-   `days`  \-- Number of days to expire the cookie (optional, default `365`)

Returns **void** 

## readCookie

reads a cookie

### Parameters

-   `name` **[string][35]** 

Returns **[string][35]** 

## getColorScheme

Gets the current color-scheme from the document `<HTML>` tag

Returns **[string][35]** \-- The current value, iether `light` or `dark`, or an empty string if not present

## updatePreferedColorSchemeEvent

**_static_** -- function called by the media query on change event.

First retrieves any saved value, and if present ignores the event, but
if not set then triggers the [#setDarkMode][14] function to chnage the current mode.

Returns **void** \-- Nothing, assumes success

## onDOMContentLoaded

**_static_** -- function called when the DOM finishes loading.

Does all the DarkMode initialization, including:

-   Loading any prior stored preference (GDPR consent is **_not_** assumed)
-   else, honoring any `<HTML>` tag `class="dark|light"` that Server-Side may set
-   else, honoring the browser / OS `prefers-color-scheme` preference
    and setting the derived mode by calling [#setDarkMode][14]

Followd by setting up the media query on change event

Returns **void** 

## darkmode

**_const_** -- This is the global instance (object) of the DarkMode class.

[1]: #bootstrap-dark-5

[2]: #indarkmode

[3]: #hasgdprconsent

[4]: #cookieexpiry

[5]: #documentroot

[6]: #savevalue

[7]: #parameters

[8]: #readvalue

[9]: #parameters-1

[10]: #erasevalue

[11]: #parameters-2

[12]: #getsavedcolorscheme

[13]: #getpreferedcolorscheme

[14]: #setdarkmode

[15]: #parameters-3

[16]: #examples

[17]: #toggledarkmode

[18]: #parameters-4

[19]: #resetdarkmode

[20]: #data_key

[21]: #value_light

[22]: #value_dark

[23]: #class_name_light

[24]: #class_name_dark

[25]: #savecookie

[26]: #parameters-5

[27]: #readcookie

[28]: #parameters-6

[29]: #getcolorscheme

[30]: #updatepreferedcolorschemeevent

[31]: #ondomcontentloaded

[32]: #darkmode

[33]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[34]: https://developer.mozilla.org/docs/Web/API/HTMLHtmlElement

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[36]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[37]: https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme
