<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [DarkMode][1]
    -   [inDarkMode][2]
        -   [Examples][3]
    -   [hasGDPRConsent][4]
        -   [Examples][5]
    -   [cookieExpiry][6]
    -   [dataSelector][7]
        -   [Examples][8]
    -   [documentRoot][9]
    -   [readValue][10]
        -   [Parameters][11]
    -   [eraseValue][12]
        -   [Parameters][13]
    -   [getSavedColorScheme][14]
    -   [getPreferedColorScheme][15]
    -   [setDarkMode][16]
        -   [Parameters][17]
        -   [Examples][18]
    -   [toggleDarkMode][19]
        -   [Parameters][20]
        -   [Examples][21]
    -   [resetDarkMode][22]
        -   [Examples][23]
    -   [DATA_KEY][24]
    -   [VALUE_LIGHT][25]
    -   [VALUE_DARK][26]
    -   [CLASS_NAME_LIGHT][27]
    -   [CLASS_NAME_DARK][28]
    -   [getColorScheme][29]
    -   [updatePreferedColorSchemeEvent][30]
    -   [onDOMContentLoaded][31]
-   [darkmode][32]

## DarkMode

_boostrap-dark-5_ `darkmode.js` -- the JavaScript module.

**_class_** **DarkMode**

Use this JS file, and its `darkmode` object, in your HTML to automatically capture `prefers-color-scheme` media query
events and also initialize the document root (`<HTML>` tag) with the user preferred color scheme.

The `darkmode` object can also be used to drive a dark mode toggle event, with optional persistance
storage in either a cookie (if GDPR consent is given) or the browsers `localStorage` object.

The module can be loaded into a html page using a standard script command.

```html
<script src="darkmode.js"></script>
```

This will create a variable `darkmode` that is an instance of the DarkMode class.

### inDarkMode

**_property_**

Used to get the current state, `true` when in dark mode, `false` when in light mode or when mode not set

Can also be used to set the current mode _(with no persistance saving)_

Type: [boolean][33]

#### Examples

Get if page is in "Dark" mode


```javascript
var myVal = darkmode.inDarkMode;
```

Set the page to the "Dark" mode


```javascript
darkmode.inDarkMode = true;
```

### hasGDPRConsent

Variable to store GDPR Consent.  This setting drives the persistance mechanism.

Used in [#saveValue][34] to determine if a cookie or the `localStorage` object should be used.

-   Set to `true` when GDPR Consent has been given to enable storage to cookie _(useful in Server-Side knowledge of user preference)_
-   The setter takes care of swapping the cookie and localStorage if appropriate
-   Default is `false`, thus storage will use the browsers localStorage object _(Note: No expiry is set)_

#### Examples

Set once GDPR consent is given by the user


```javascript
darkmode.hasGDPRConsent = true;
```

### cookieExpiry

Expiry time in days when saving and GDPR consent is give

### dataSelector

When set will use the given data selector instead of a class in the `<html>`tag

Type: [string][35]

#### Examples

Setting the dataSelector


```javascript
// use the full name attribute, starting with "data-"
darkmode.dataSelector = "data-bs-theme";
```

Returns **[string][35]** 

### documentRoot

Saves the instance of the documentRoot (i.e. `<html>` tag) when the object is created.

Type: [HTMLHtmlElement][36]

Returns **[HTMLHtmlElement][36]** 

### readValue

Retrieves the color-scheme last saved

**NOTE:** is dependant on [#hasGDPRConsent][37]

#### Parameters

-   `name` **[string][35]** \-- Name of the cookie or localStorage->name

Returns **[string][35]** \-- The saved value, either `light` or `dark`, or an empty string if not saved prior

### eraseValue

Deletes the saved color-scheme

**NOTE:** is dependant on [#hasGDPRConsent][37]

#### Parameters

-   `name` **[string][35]** 

Returns **void** \-- Nothing, erasure is assumed

### getSavedColorScheme

Queries the `<HTML>` tag for the current color-scheme

_(This value is set prior via the [#setDarkMode][38]) function.)_

Returns **[string][35]** \-- The current value, either `light` or `dark`, or an empty string if not saved prior

### getPreferedColorScheme

Queries the `prefers-color-scheme` media query for the current color-scheme

_(This value is set prior via the [#setDarkMode][38]) function.)_

Returns **[string][35]** \-- The current value, either `light` or `dark`, or an empty string if the media query is not supported

### setDarkMode

Sets the color-scheme in the `<HTML>` tag as a class called either `light` or `dark`

**Note:** This function will modify your document root element, i.e. the `<HTML>` tag

Default behavior when setting dark mode `true`

```html
<html lang="en" class="dark">
<!-- Note: the "light" class is removed -->
```

Default behavior when setting dark mode `false`

```html
<html lang="en" class="light">
<!-- Note: the "dark" class is removed -->
```

Behavior when setting dark mode `true`, and `dataSelector = "data-bs-theme"`

```html
<html lang="en" data-bs-theme="dark">
```

Behavior when setting dark mode `false`, and `dataSelector = "data-bs-theme"`

```html
<html lang="en" data-bs-theme="light">
```

#### Parameters

-   `darkMode` **[boolean][33]** \-- `true` for "dark", `false` for 'light'
-   `doSave` **[boolean][33]** \-- If `true`, then will also call [#saveValue][34] to save that state (optional, default `true`)

#### Examples

Set the color scheme to **_dark_**, saving the state to the persistance mechanism


```javascript
document.querySelector("#darkmode-on-button").onclick = function(e){
  darkmode.setDarkMode(true);  // save=true is default
}
```

Set the color scheme to **_light_**, but not saving the state


```javascript
document.querySelector("#darkmode-off-button-no-save").onclick = function(e){
  darkmode.setDarkMode(false, false);
}
```

Returns **void** \-- Nothing, assumes saved

### toggleDarkMode

Toggles the color scheme in the `<HTML>` tag as a class called either `light` or `dark`
based on the inverse of it's prior state.

When [#dataSelector][39] is set, this is set in the given data selector as the data value.

_(See [#setDarkMode][38])_

#### Parameters

-   `doSave`   (optional, default `true`)

#### Examples

Bind an UI Element `click` event to toggle dark mode


```javascript
document.querySelector("#darkmode-button").onclick = function(e){
  darkmode.toggleDarkMode();
}
```

Returns **void** Nothing, assumes success

### resetDarkMode

Clears the persistance state of the module and resets the document to the default mode.

Calls [#eraseValue][40] to erase any saved value, and then
calls [#getPreferedColorScheme][41] to retrieve the `prefers-color-scheme` media query,
passing its value to [#setDarkMode][38] to reset the users preference.

#### Examples

Bind a reset UI Element `click` event to reset the dark mode


```javascript
document.querySelector("#darkmode-forget").onclick = function(e){
  darkmode.resetDarkMode();
}
```

Returns **void** Nothing, no error handling is performed.

### DATA_KEY

**_const_** -- Name of the cookie or localStorage->name when saving

### VALUE_LIGHT

**_const_** -- String used to identify light mode _(do not change)_, @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][42]

### VALUE_DARK

**_const_** -- String used to identify dark mode _(do not change)_, @see [https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme][42]

### CLASS_NAME_LIGHT

**_const_** -- String used to identify light mode as a class in the `<HTML>` tag

### CLASS_NAME_DARK

**_const_** -- String used to identify dark mode as a class in the `<HTML>` tag

### getColorScheme

Gets the current color-scheme from the document `<HTML>` tag

Returns **[string][35]** \-- The current value, iether `light` or `dark`, or an empty string if not present

### updatePreferedColorSchemeEvent

**_static_** -- function called by the media query on change event.

First retrieves any persistent/saved value, and if present ignores the event, but
if not set then triggers the [#setDarkMode][38] function to change the current mode.

Returns **void** \-- Nothing, assumes success

### onDOMContentLoaded

**_static_** -- function called when the DOM finishes loading.

Does all the DarkMode initialization, including:

-   Loading any prior stored preference (GDPR consent is **_not_** assumed)
-   else, honoring any `<HTML>` tag `class="dark|light"` that Server-Side may set
-   else, honoring the browser / OS `prefers-color-scheme` preference
    and setting the derived mode by calling [#setDarkMode][38]

Followed by setting up the media query on change event

**_Warning:_** This function is automatically called when loading this module.

Returns **void** 

## darkmode

**_const_** -- This is the global instance (object) of the DarkMode class.

[1]: #darkmode

[2]: #indarkmode

[3]: #examples

[4]: #hasgdprconsent

[5]: #examples-1

[6]: #cookieexpiry

[7]: #dataselector

[8]: #examples-2

[9]: #documentroot

[10]: #readvalue

[11]: #parameters

[12]: #erasevalue

[13]: #parameters-1

[14]: #getsavedcolorscheme

[15]: #getpreferedcolorscheme

[16]: #setdarkmode

[17]: #parameters-2

[18]: #examples-3

[19]: #toggledarkmode

[20]: #parameters-3

[21]: #examples-4

[22]: #resetdarkmode

[23]: #examples-5

[24]: #data_key

[25]: #value_light

[26]: #value_dark

[27]: #class_name_light

[28]: #class_name_dark

[29]: #getcolorscheme

[30]: #updatepreferedcolorschemeevent

[31]: #ondomcontentloaded

[32]: #darkmode-1

[33]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[34]: #saveValue

[35]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[36]: https://developer.mozilla.org/docs/Web/API/HTMLHtmlElement

[37]: #hasGDPRConsent

[38]: #setDarkMode

[39]: #dataSelector

[40]: #eraseValue

[41]: #getPreferedColorScheme

[42]: https://www.w3.org/TR/mediaqueries-5/#prefers-color-scheme
